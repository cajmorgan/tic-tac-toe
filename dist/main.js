(()=>{"use strict";const t=class{constructor(t=["","","","","","","","",""]){this.currentState=t}printConsoleBoard(){let t="";this.currentState.forEach(((e,r)=>{t+=e?` ${e} |`:"   |",(r+1)%3==0&&(t=t.slice(0,-1),r<8&&(t+="\n――― ――― ―――\n"))})),console.log("%c"+t,"color: #6d4e42;font-size:16px")}isEmpty(){return this.currentState.every((t=>!t))}isFull(){return this.currentState.every((t=>t))}isTerminal(){const t=["xxx","ooo"],e=[this.currentState[0]+this.currentState[1]+this.currentState[2],this.currentState[3]+this.currentState[4]+this.currentState[5],this.currentState[6]+this.currentState[7]+this.currentState[8],this.currentState[0]+this.currentState[3]+this.currentState[6],this.currentState[1]+this.currentState[4]+this.currentState[7],this.currentState[2]+this.currentState[5]+this.currentState[8],this.currentState[0]+this.currentState[4]+this.currentState[8],this.currentState[2]+this.currentState[4]+this.currentState[6]];if(this.isEmpty())return!1;for(let r=0;r<e.length;r++)for(let n=0;n<t.length;n++)if(e[r]===t[n])return{winner:t[n][0]};return!!this.isFull()&&{winner:"draw"}}insert(t,e){return!(e>8||this.currentState[e]||(this.currentState[e]=t,0))}availableMoves(){const t=[];return this.currentState.forEach(((e,r)=>{e||t.push(r)})),t}},e=document.querySelector(".start"),r=document.querySelector(".grid");let n=0,i=0;e.addEventListener("click",(function(s=-1,a=1){e.disabled=!0;let o=new class{constructor(t=-1){this.maxDepth=t,this.nodesMap=new Map}getBestMove(e,r=!0,n=(()=>{}),i=0){if(0==i&&this.nodesMap.clear(),e.isTerminal()||i==this.maxDepth)return"x"==e.isTerminal().winner?100-i:"o"==e.isTerminal().winner?-100+i:0;if(r){let r=-100;if(e.availableMoves().forEach((s=>{let a=new t(e.currentState.slice());a.insert("x",s);let o=this.getBestMove(a,!1,n,i+1);if(r=Math.max(r,o),0==i){var l=this.nodesMap.has(o)?`${this.nodesMap.get(o)},${s}`:s;this.nodesMap.set(o,l)}})),0==i){if("string"==typeof this.nodesMap.get(r))var s=(a=this.nodesMap.get(r).split(","))[Math.floor(Math.random()*a.length)];else s=this.nodesMap.get(r);return n(s),s}return r}if(!r){let r=100;var a;return e.availableMoves().forEach((s=>{let a=new t(e.currentState.slice());a.insert("o",s);let o=this.getBestMove(a,!0,n,i+1);if(r=Math.min(r,o),0==i){var l=this.nodesMap.has(o)?`${this.nodesMap.get(o)},${s}`:s;this.nodesMap.set(o,l)}})),0==i?(s="string"==typeof this.nodesMap.get(r)?(a=this.nodesMap.get(r).split(","))[Math.floor(Math.random()*a.length)]:this.nodesMap.get(r),n(s),s):r}}}(parseInt(s)),l=new t(["","","","","","","","",""]);if(document.querySelector(".cell")){const t=document.querySelectorAll(".cell");for(let e=0;e<=t.length;e++)if(t[e])t[e].textContent="";else if(!t[e])continue}!function(){if(!document.querySelector(".cell")){for(let t=0;t<=8;t++){let e=document.createElement("div");e.classList.add("cell"),e.setAttribute("id",`cell${t}`),r.appendChild(e)}console.log("New Round")}}(),l.printConsoleBoard(),r.addEventListener("click",(function(t){if(!t.target.textContent){if(0!=l.isTerminal())return;"x"==l.isTerminal().winner&&(i+=1,console.log(i));let r=t.target.id;if(l.currentState[r.slice(-1)]="x",t.target.textContent="x",l.printConsoleBoard(),console.log(l.isTerminal().winner),"draw"==l.isTerminal().winner)return void(e.disabled=!1);0==l.isFull()&&function(){const t=o.getBestMove(l,!1);if(l.currentState[t]="o",document.querySelector(`#cell${t}`).textContent="o",l.printConsoleBoard(),console.log(l.isTerminal().winner),"o"==l.isTerminal().winner)return n+=1,console.log(n),e.textContent="Play Again",void(e.disabled=!1);0!=l.isTerminal()&&(e.textContent="Play Again",e.disabled=!1)}()}}))}))})();