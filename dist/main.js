(()=>{"use strict";const t=class{constructor(t=["","","","","","","","",""]){this.currentState=t}printConsoleBoard(){let t="";this.currentState.forEach(((e,n)=>{t+=e?` ${e} |`:"   |",(n+1)%3==0&&(t=t.slice(0,-1),n<8&&(t+="\n――― ――― ―――\n"))})),console.log("%c"+t,"color: #6d4e42;font-size:16px")}isEmpty(){return this.currentState.every((t=>!t))}isFull(){return this.currentState.every((t=>t))}isTerminal(){const t=["xxx","ooo"],e=[this.currentState[0]+this.currentState[1]+this.currentState[2],this.currentState[3]+this.currentState[4]+this.currentState[5],this.currentState[6]+this.currentState[7]+this.currentState[8],this.currentState[0]+this.currentState[3]+this.currentState[6],this.currentState[1]+this.currentState[4]+this.currentState[7],this.currentState[2]+this.currentState[5]+this.currentState[8],this.currentState[0]+this.currentState[4]+this.currentState[8],this.currentState[2]+this.currentState[4]+this.currentState[6]];if(this.isEmpty())return!1;for(let n=0;n<e.length;n++)for(let r=0;r<t.length;r++)if(e[n]===t[r])return{winner:t[r][0]};return!!this.isFull()&&{winner:"draw"}}insert(t,e){return!(e>8||this.currentState[e]||(this.currentState[e]=t,0))}availableMoves(){const t=[];return this.currentState.forEach(((e,n)=>{e||t.push(n)})),t}},e=document.querySelector(".start"),n=document.querySelector(".grid");let r=0,o=0;!function(){let t=100,e=setInterval((()=>{t--,document.querySelector(".X").textContent=""+t,document.querySelector(".O").textContent=""+t,0==t&&clearInterval(e)}))}(),e.addEventListener("click",(function(i=-1,s=1){e.disabled=!0;let l=new class{constructor(t=-1){this.maxDepth=t,this.nodesMap=new Map}getBestMove(e,n=!0,r=(()=>{}),o=0){if(0==o&&this.nodesMap.clear(),e.isTerminal()||o==this.maxDepth)return"x"==e.isTerminal().winner?100-o:"o"==e.isTerminal().winner?-100+o:0;if(n){let n=-100;if(e.availableMoves().forEach((i=>{let s=new t(e.currentState.slice());s.insert("x",i);let l=this.getBestMove(s,!1,r,o+1);if(n=Math.max(n,l),0==o){var a=this.nodesMap.has(l)?`${this.nodesMap.get(l)},${i}`:i;this.nodesMap.set(l,a)}})),0==o){if("string"==typeof this.nodesMap.get(n))var i=(s=this.nodesMap.get(n).split(","))[Math.floor(Math.random()*s.length)];else i=this.nodesMap.get(n);return r(i),i}return n}if(!n){let n=100;var s;return e.availableMoves().forEach((i=>{let s=new t(e.currentState.slice());s.insert("o",i);let l=this.getBestMove(s,!0,r,o+1);if(n=Math.min(n,l),0==o){var a=this.nodesMap.has(l)?`${this.nodesMap.get(l)},${i}`:i;this.nodesMap.set(l,a)}})),0==o?(i="string"==typeof this.nodesMap.get(n)?(s=this.nodesMap.get(n).split(","))[Math.floor(Math.random()*s.length)]:this.nodesMap.get(n),r(i),i):n}}}(parseInt(i)),a=new t(["","","","","","","","",""]);if(document.querySelector(".cell")){const t=document.querySelectorAll(".cell");for(let e=0;e<=t.length;e++)if(t[e])t[e].textContent="",t[e].style.backgroundColor="transparent";else if(!t[e])continue}!function(){if(!document.querySelector(".cell")){for(let t=0;t<=8;t++){let e=document.createElement("div");e.classList.add("cell"),e.setAttribute("id",`cell${t}`),n.appendChild(e)}console.log("New Round")}}(),a.printConsoleBoard(),n.addEventListener("click",(function(t){if(!t.target.textContent){if(0!=a.isTerminal())return;"x"==a.isTerminal().winner&&(o+=1,document.querySelector(".X").textContent=o,console.log(o));let n=t.target.id;if(a.currentState[n.slice(-1)]="x",t.target.textContent="x",t.target.style.backgroundColor="lightblue",a.printConsoleBoard(),console.log(a.isTerminal().winner),"draw"==a.isTerminal().winner)return e.textContent="Play Again",void(e.disabled=!1);0==a.isFull()&&function(){const t=l.getBestMove(a,!1);a.currentState[t]="o";const n=document.querySelector(`#cell${t}`);if(n.textContent="o",n.style.backgroundColor="red",a.printConsoleBoard(),console.log(a.isTerminal().winner),"o"==a.isTerminal().winner){r+=1,document.querySelector(".O").textContent=r,console.log(r),e.textContent="Play Again",e.disabled=!1;const t=document.querySelectorAll(".cell"),n=[t[0].textContent+t[1].textContent+t[2].textContent,t[3].textContent+t[4].textContent+t[5].textContent,t[6].textContent+t[7].textContent+t[8].textContent,t[0].textContent+t[3].textContent+t[6].textContent,t[1].textContent+t[4].textContent+t[7].textContent,t[2].textContent+t[5].textContent+t[8].textContent,t[0].textContent+t[4].textContent+t[8].textContent,t[2].textContent+t[4].textContent+t[6].textContent],o=[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8],t[0],t[4],t[8],t[2],t[4],t[6]];let i=t=>"ooo"===t,s=n.findIndex(i),l="orange";return function(){s=3*(s+1);let t=0,n=setInterval((()=>{t+=1,o[s-1].style.backgroundColor=l,o[s-2].style.backgroundColor=l,o[s-3].style.backgroundColor=l,l=t%2==0?"orange":"green",e.addEventListener("click",(()=>{clearInterval(n)}))}),300)}(),void console.log(s)}0!=a.isTerminal()&&(e.textContent="Play Again",e.disabled=!1)}()}}))}))})();